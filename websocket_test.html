<!DOCTYPE html>
<html>
    <head>
        <title>PIC WebSocket Test</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    </head>
    <body>
        <script language="javascript" type="text/javascript">

        var websocketUri = 'ws://192.168.0.199/';

        function onLoad() {
            result           = document.createElement('div');
            result.id        = 'result';
            result.innerHTML = '\<h1>PIC Websocket test\</h1>';
            document.body.appendChild(result);

            websocket = new WebSocket(websocketUri);

            websocket.onmessage = function(event) {
                result.innerHTML += '&gt;&gt;&gt; ' + event.data + '\<br/>';
            }

            websocket.onopen = function(event) {
                result.innerHTML += '+++ connection opened.\<br/>';
                websocket.send('hello world');
                result.innerHTML += '&lt;&lt;&lt; hello world\<br/>';
            };

            websocket.onclose = function(event) {
                result.innerHTML += '--- connection closed.\<br/>\<br/>';
            };

            websocket.onerror = function(event) {
                 result.innerHTML += 'Error: ' + event.data + '\<br/>';
            };
        }

        window.addEventListener('load', onLoad, false);

        </script>
    </body>
</html>
